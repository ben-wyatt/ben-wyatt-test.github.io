---
layout: layout.njk
---

<article class="post">
  <h1>
    {{ (title or page.fileSlug) | replace("-", " ") | replace("_", " ") }}
  </h1>
  {{ content | safe }}

  {% if date_published or (date_updated and date_updated != date_published) %}
  <hr class="post-meta-sep">
  <div class="post-meta">
    {% if date_published %}
      <p>Published {{ date_published | prettyDate }}</p>
    {% endif %}
    {% if date_updated and date_updated != date_published %}
      <p>Updated {{ date_updated | prettyDate }}</p>
    {% endif %}
  </div>
  {% endif %}
</article>


{% set currentSlug = page.fileSlug | slug %}
{% set rel = related and related[currentSlug] %}
{% if rel and rel.length %}
<section class="related-posts">
  <h2>You might also like</h2>
  <ul class="post-list">
    {% set postsCollection = collections.post or collections.all %}
    {% for rec in rel %}
      {% for p in postsCollection %}
        {% if (p.fileSlug | slug) == rec.slug %}
          <li>{{ p.date | date("yyyy-MM-dd") }} | <a href="{{ p.url }}">{{ p.data.title or (p.fileSlug | replace("-", " ") | replace("_", " ")) }}</a></li>
        {% endif %}
      {% endfor %}
    {% endfor %}
  </ul>
</section>
{% endif %}


